package afdx_adiru_model
public

  WITH AFDX;
  WITH HW_Platform;
  WITH Software_Layer;
  WITH AFDX_Properties;
  
  AFDX_Network renames VIRTUAL BUS AFDX::Network;


------------------------------------------------------------------
----------------------- Main Model ADIRU AFDX---------------------
------------------------------------------------------------------

  SYSTEM afdx_adiru_model
  END afdx_adiru_model;
    
  SYSTEM IMPLEMENTATION afdx_adiru_model.i 
    SUBCOMPONENTS
      HW_Platform : SYSTEM HW_Platform.i;
      Software_Layer : SYSTEM Software_Layer::Software_Layer.i;
      -- ARINC-653 Configuration
      IRS_Partition : VIRTUAL PROCESSOR;
      ADR_Partition : VIRTUAL PROCESSOR;
      FMS_ADIRU_Partition : VIRTUAL PROCESSOR;
   
      -- AFDX Configuration
      AFDX_Network : VIRTUAL BUS AFDX_Network.i;
  	PROPERTIES
      -- Network speed defined for the whole network here
      AFDX_Properties::portSpeed => 100 MBytesps;
      
      
  end afdx_adiru_model;   
    
    
  ------------------------------------------------------------------
--- 1. HW_Platform
------------------------------------------------------------------
  SYSTEM HW_Platform
  END HW_Platform;
  SYSTEM IMPLEMENTATION HW_Platform.i
    SUBCOMPONENTS
      CPM_1 : SYSTEM Module.i; -- Processor or System
      CPM_2 : SYSTEM Module.i; -- Processor or System
      CPM_3 : SYSTEM Module.i; -- Processor or System
      WIRE_1 : BUS AFDX::Wire; -- Bus
      WIRE_2 : BUS AFDX::Wire; -- Bus
      WIRE_3 : BUS AFDX::Wire; -- Bus
      WIRE_4 : BUS AFDX::Wire; -- Bus
      SW_1 : DEVICE AFDXSwitch_4p; -- Device or System
      SW_2 : DEVICE AFDXSwitch_4p; -- Device or System
    CONNECTIONS
      WIRE_1_CPM_1: BUS ACCESS WIRE_1->CPM_1.afdx;
      WIRE_1_SW_1:  BUS ACCESS WIRE_1->SW_1.afdx_p1;
      WIRE_3_SW_1:  BUS ACCESS WIRE_3->SW_1.afdx_p3;
      WIRE_1_CPM_2: BUS ACCESS WIRE_3->CPM_2.afdx;
      WIRE_2_SW_1:  BUS ACCESS WIRE_2->SW_1.afdx_p4;
      WIRE_2_SW_2:  BUS ACCESS WIRE_2->SW_2.afdx_p1;
      WIRE_4_SW_2:  BUS ACCESS WIRE_4->SW_2.afdx_p4;
      WIRE_4_CPM_3: BUS ACCESS WIRE_4->CPM_3.afdx;
  END HW_Platform.i;  
 
 
 ------------------------------------------------------------------
--- 1.1 Module
------------------------------------------------------------------
  SYSTEM Module
    FEATURES
      afdx : REQUIRES BUS ACCESS AFDX::Wire;
  END Module;

  SYSTEM IMPLEMENTATION Module.i
    SUBCOMPONENTS
      CPU : PROCESSOR CPU_with_PCI;
      AFDX_ES : DEVICE AFDX_Card;
      PCI_BUS : BUS;
    CONNECTIONS
      CPU_PCI: BUS ACCESS PCI_BUS->CPU.pci;
      AFDX_ES_PCI: BUS ACCESS PCI_BUS->AFDX_ES.pci;
      AFDX_EXT: BUS ACCESS AFDX_ES.afdx->afdx;
  END Module.i;
      
  
end afdx_adiru_model;